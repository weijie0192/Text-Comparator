@{
    ViewBag.Title = "Home Page";
}

<br />
<div class="row">
    <div class="col-md-3">
        <div class="panel panel-info">
            <div class="panel-body">
                <div class="form-group ">
                    <label>Group</label> <button class="btn btn-link pull-right" style="padding:0;"><i class="fa fa-sitemap"></i> Manage Log</button>
                    <br />
                    <select id="group-select" style="width:100%"><option>group1</option><option>group2</option><option>group3</option><option>group4</option></select>
                </div>
                <div class="form-group">
                    <label>File Log</label><button class="btn btn-link pull-right" style="padding:0;"><i class="fa fa-upload"></i> Upload Log</button>
                    <br />
                    <select id="log-select" style="width:100%"><option>log1</option><option>log2</option><option>log3</option><option>log4</option></select>
                </div>
                <div id="daterange" class="form-group collapse">
                    <label>Date Range</label>
                    <br />
                    <div id="reportrange" style=" cursor: pointer;" class="form-control">
                        <i class="fa fa-calendar"></i>&nbsp;
                        <span></span> <i class="fa fa-caret-down pull-right"></i>
                    </div>
                </div>
                <div class=" form-group">
                    <button class="btn  btn-secondary" >Reset <i class="fa fa-repeat"></i></button>
                    <div class="btn-group pull-right" >
                        <button type="button" id="dt-toggle" data-toggle="collapse" data-target="#daterange" class="btn btn-default"><i class="fa fa-plus"></i></button>
                        <button type="button" class="btn btn-primary">Display &nbsp;<i class="fa fa-search"></i></button>
                    </div>
                </div>
                <!---->

                <div>
                    <ul class="list-group list-group-flush" style="border-top:1px lightgray solid; margin-bottom:0">
                        <li class="list-group-item">
                            <span class="badge">14</span>
                            Unique User
                        </li>
                        <li class="list-group-item">
                            <span class="badge">14</span>
                            GET Requests
                        </li>

                        <li class="list-group-item">
                            <span class="badge">14</span>
                            POST Requests
                        </li>

                        <li class="list-group-item list-group-item">
                            <span class="badge">28</span>
                            TOTAL Requests
                        </li>
                    </ul>
                </div>
            </div>

        </div>

    </div>
    <div class="col-md-9">
        <div class="panel panel-info">
            <div class="panel-body">
                <div class="chart">
                    <canvas id="stack-chart" style="height:345px; width:100%;"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-info">
            <div class="panel-body">
                <ul class="nav nav-tabs">
                    <li role="presentation" class="active"><a href="#">Parsed Data</a></li>
                    <li role="presentation"><a href="#">Raw Data</a></li>
                </ul>
                <br />
                <table id="myTable" class="table table-hover table-striped nowrap">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Date</th>
                            <th>Post</th>
                            <th>Get</th>
                            <th>File</th>
                            <th>Org</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                        <tr>
                            <td>Some name</td>
                            <td>1/4/2017</td>
                            <td>21</td>
                            <td>32</td>
                            <td>some log</td>
                            <td>srs</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>

    $(document).ready(function () {
        $("#group-select").select2();
        $("#log-select").select2();
        $("#myTable").DataTable();
        $('[data-toggle="tooltip"]').tooltip()

        var chartCanvas = $('#stack-chart')
            .get(0).getContext('2d');
        this.lineChart = new Chart(chartCanvas, {
            type: 'line',
            data: {
                labels: [
                    '2/1/2018',
                    '2/4/2018',
                    '2/7/2018',
                    '2/9/2018',
                    '2/1/2018',
                    '2/4/2018',
                    '2/7/2018',
                    '2/9/2018',
                    '2/1/2018',
                    '2/4/2018',
                    '2/7/2018',

                ],
                datasets: [
                    {
                        lineTension: 0,   
                        label: 'POST Requests',
                        borderColor: 'darkgray',
                        backgroundColor: '#ddd',
                        data: [3, 2, 1, 4, 5, 6, 2, 5, 6, 19, 2]
                    },
                    {
                        lineTension: 0,   
                        label: 'GET Requests',
                        borderColor: 'darkgray',
                        backgroundColor: '#337ab7',
                        data: [5, 2, 1, 3, 5, 7, 10, 1, 2, 5, 2]
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                legend: {
                    display: false
                },
                title: {
                    display: true,
                    text: 'Requests Stack Chart'
                },
                tooltips: {
                    mode: 'index',
                    intersect: false
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                scales: {
                    xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Date'
                        },
                        ticks: {
                            autoSkip: true,
                            maxTicksLimit: 14
                        }
                    }],
                    yAxes: [
                        {
                            stacked: true,
                            scaleLabel: {
                                display: true,
                                labelString: 'Total Request'
                            }
                        }
                    ]
                },
            }
        });

        $('#dt-toggle').on('click', function () {
            var i = $(this).find("i");
            console.log(i.hasClass('fa-plus'));
            if (i.hasClass('fa-plus')) {
                i.removeClass('fa-plus').addClass('fa-minus');
            } else {
                i.removeClass('fa-minus').addClass('fa-plus');
            }
        });

        var startDate = moment();
        var endDate = moment();

        function cb(start, end) {
            $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
        }
       
        $('#reportrange').daterangepicker({
            ranges: {
                'Today': [moment(), moment()],
                'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                'This Month': [moment().startOf('month'), moment().endOf('month')],
                'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
            }
        }, cb);
        cb(startDate, endDate);
    });
</script>

<style>

    .list-group-flush .list-group-item:first-child {
        border-top: 0;
    }

    .list-group-flush .list-group-item:last-child {
        border-bottom: 0;
    }

    .list-group-flush .list-group-item {
        border-left: 0;
        border-right: 0;
    }

    .list-group .list-group-item:hover {
        background-color: #f5f5f5;
    }

    .nopadding {
        padding: 0 !important;
        margin: 0 !important;
    }

    .container {
        width: 90% !important;
        margin: 0 auto !important;
    }

    html, body {
        width: 100% !important;
    }
</style>
